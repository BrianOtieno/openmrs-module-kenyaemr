<!--
  ~ The contents of this file are subject to the OpenMRS Public License
  ~ Version 1.0 (the "License"); you may not use this file except in
  ~ compliance with the License. You may obtain a copy of the License at
  ~ http://license.openmrs.org
  ~
  ~ Software distributed under the License is distributed on an "AS IS"
  ~ basis, WITHOUT WARRANTY OF ANY KIND, either express or implied. See the
  ~ License for the specific language governing rights and limitations
  ~ under the License.
  ~
  ~ Copyright (C) OpenMRS, LLC.  All Rights Reserved.
  -->
<htmlform>
    <macros>
      <macro key="countryNames" value="Afghanistan, Äland Islands, Albania, Algeria, American Samoa, Andorra, Angola, Anguilla, Antarctica, Antigua and Barbuda, Argentina, Armenia, Aruba, Australia, Austria, Azerbaijan, Bahamas, Bahrain, Bangladesh, Barbados, Belarus, Belgium, Belize, Benin, Bermuda, Bhutan, Bolivia, Sint Eustatius and Saba Bonaire, Bosnia and Herzegovina, Botswana, Bouvet Island, Brazil, British Indian Ocean Territory, Brunei Darussalam, Bulgaria, Burkina Faso, Burundi, Cabo Verde, Cambodia, Cameroon, Canada, Cayman Islands, Central African Republic, Chad, Chile, China, Christmas Island, Cocos (Keeling) Islands, Colombia, Comoros, Congo, Congo, Democratic Republic of the, Cook Islands, Costa Rica, C√¥te d'Ivoire, Croatia, Cuba, Cura√ßao, Cyprus, Czechia, Denmark, Djibouti, Dominica, Dominican Republic, Ecuador, Egypt, El Salvador, Equatorial Guinea, Eritrea, Estonia, Eswatini, Ethiopia, Falkland Islands (Malvinas), Faroe Islands, Fiji, Finland, France, French Guiana, French Polynesia, French Southern Territories, Gabon, Gambia, Georgia, Germany, Ghana, Gibraltar, Greece, Greenland, Grenada, Guadeloupe, Guam, Guatemala, Guernsey, Guinea, Guinea-Bissau, Guyana, Haiti, Heard Island and McDonald Islands, Holy See, Honduras, Hong Kong, Hungary, Iceland, India, Indonesia, Iran, Iraq, Ireland, Isle of Man, Israel, Italy, Jamaica, Japan, Jersey, Jordan, Kazakhstan, Kenya, Kiribati, Democratic People's Republic of Korea, Republic of Korea, Kuwait, Kyrgyzstan, Lao People's Democratic Republic, Latvia, Lebanon, Lesotho, Liberia, Libya, Liechtenstein, Lithuania, Luxembourg, Macao, Madagascar, Malawi, Malaysia, Maldives, Mali, Malta, Marshall Islands, Martinique, Mauritania, Mauritius, Mayotte, Mexico, Micronesia, Moldova, Monaco, Mongolia, Montenegro, Montserrat, Morocco, Mozambique, Myanmar, Namibia, Nauru, Nepal, Netherlands, New Caledonia, New Zealand, Nicaragua, Niger, Nigeria, Niue, Norfolk Island, North Macedonia, Northern Mariana Islands, Norway, Oman, Pakistan, Palau, Palestine, Panama, Papua New Guinea, Paraguay, Peru, Philippines, Pitcairn, Poland, Portugal, Puerto Rico, Qatar, Réunion, Romania, Russian Federation, Rwanda, Saint Barthélemy, Saint Helena, Ascension and Tristan da Cunha, Saint Kitts and Nevis, Saint Lucia, Saint Martin, Saint Pierre and Miquelon, Saint Vincent and the Grenadines, Samoa, San Marino, Sao Tome and Principe, Saudi Arabia, Senegal, Serbia, Seychelles, Sierra Leone, Singapore, Sint Maarten, Slovakia, Slovenia, Solomon Islands, Somalia, South Africa, South Georgia and the South Sandwich Islands, South Sudan, Spain, Sri Lanka, Sudan, Suriname, Svalbard and Jan Mayen, Sweden, Switzerland, Syrian Arab Republic, Taiwan, Tajikistan, Tanzania, Thailand, Timor-Leste, Togo, Tokelau, Tonga, Trinidad and Tobago, Tunisia, Turkey, Turkmenistan, Turks and Caicos Islands, Tuvalu, Uganda, Ukraine, United Arab Emirates, United Kingdom of Great Britain and Northern Ireland, United States of America, United States Minor Outlying Islands, Uruguay, Uzbekistan, Vanuatu, Venezuela, Viet Nam, Virgin Islands (British), Virgin Islands (U.S.), Wallis and Futuna, Western Sahara, Yemen, Zambia, Zimbabwe"/>
      <macro key="countyNames" value="Nairobi,Mombasa,Kilifi,Kwale,Homa-Bay,Kisumu,Migori,Kisii,Uasin-Gishu,Bomet,Busia,Kiambu,Nyeri,Muranga,Kirinyaga,Nyandarua,Machakos,Kitui,Makueni,Embu,Meru,Isiolo,Marsabit,Turkana,Mandera,Lamu,West Pokot,Bungoma,Vihiga,Kakamega,Siaya,Nyamira,Kericho,Trans Nzoia,Nakuru,Laikipia,Tharaka Nith,Garissa,Taita Taveta,Tana River,Samburu,Elgeyo Marakwet,Nandi,Baringo,Narok,Kajiado,Wajir" />
    </macros>
    <script type="text/javascript" src="../moduleResources/kenyaemr/scripts/moment.js"></script>
    <script type="text/javascript">
        jq(function () {
            jq('#detected-poe input').change(onDetectedAtPOEChange);
            jq('#symptomatic input').change(onSymptomaticChange);
            jq('#pregnant input').change(onPregnantChange);
            jq('#underlying-conditions input').change(onUnderlyingConditionsChange);
            jq('#onset-date').hide();
            jq('#patient-symptoms').hide();
            jq('#trimester').hide();
            jq('#conditions').hide();
            jq('#date-detected-poe-lbl').hide();
            jq('#date-detected-poe').hide();
            jq('#hospital-admission').hide();
            jq('#admission-to-hospital input').change(onAdmissionToHospitalChange);
            jq('#date-of-death').hide();
            jq('#status-at-reporting input').change(onStatusAtReportingChange);
            jq('#places-visited').hide();
            jq('#travelled-last-14-days input').change(onTravelledRecentlyChange);
            jq('#specify-symptoms').hide();
            jq('#obs-other-symptom input').change(onOtherSymptomsChange);
            jq('#specify-signs').hide();
            jq('#obs-other-signs input').change(onOtherSignsChange);
            jq('#contact-setting-infected').hide();
            jq('#contact-with-infected-person-last-14-days input').change(onRecentlyContactedInfectedPersonChange);
            jq('#contact-setting-probable').hide();
            jq('#contact-confirmed-probable-case-last-14-days input').change(onRecentlyContactedProbableCaseChange);
            jq('#animal-market').hide();
            jq('#visited-animal-market-last-14-days input').change(onRecentlyVisitedAnimalMarketChange);

            //jq('#animal-market-exposure-location').hide();
        });
        // jQuery(function ($) {
        beforeSubmit.push(function () {
        });
        function onDetectedAtPOEChange() {

            if (getValue('detected-poe.value') == 165651 || getValue('detected-poe.value') == 163488) {
                jq('#date-detected-poe-lbl').show();
                jq('#date-detected-poe').show();
            }else{
                clearHiddenSections(jq('#date-detected-poe'));
                jq('#date-detected-poe-lbl').hide();
                jq('#date-detected-poe').hide();
            }
        }
        function onSymptomaticChange() {

            if (getValue('symptomatic.value') == 1065) {
                jq('#onset-date').show();
                jq('#patient-symptoms').show();
               }else{
                jq('#onset-date').hide();
                jq('#patient-symptoms').hide();
                clearHiddenSections(jq('#date-onset-of-symptoms'));
                clearHiddenSections(jq('#fever'));
                clearHiddenSections(jq('#sore-throat'));
                clearHiddenSections(jq('#weakness'));
                clearHiddenSections(jq('#cough'));
                clearHiddenSections(jq('#diarrhoea'));
                clearHiddenSections(jq('#joint-pain'));
                clearHiddenSections(jq('#chest-pain'));
                clearHiddenSections(jq('#confusion'));
                clearHiddenSections(jq('#vomiting'));
                clearHiddenSections(jq('#short-breath'));
                clearHiddenSections(jq('#runny-nose'));
                clearHiddenSections(jq('#headache'));
                clearHiddenSections(jq('#abdominal-pain'));
                clearHiddenSections(jq('#muscular-pain'));
                clearHiddenSections(jq('#obs-other-symptom'));
                clearHiddenSections(jq('#obs-specify-symptoms'));
            }
        }
        function onPregnantChange() {

            if (getValue('pregnant.value') == 1065) {
                jq('#trimester').show();
            }else{
                clearHiddenSections(jq('#trimester-number'));
                jq('#trimester').hide();
            }
        }
        function onUnderlyingConditionsChange() {

            if (getValue('underlying-conditions.value') == 1065) {
                jq('#conditions').show();
            }else{
                clearHiddenSections(jq('#lung'));
                clearHiddenSections(jq('#malignancy'));
                clearHiddenSections(jq('#renal'));
                clearHiddenSections(jq('#immuno'));
                clearHiddenSections(jq('#partum'));
                clearHiddenSections(jq('#neuro'));
                clearHiddenSections(jq('#liver'));
                clearHiddenSections(jq('#diabetes'));
                clearHiddenSections(jq('#card'));
                jq('#conditions').hide();
            }
        }
        function onAdmissionToHospitalChange() {
            if (getValue('admission-to-hospital.value') == 1065) {
                jq('#hospital-admission').show();
            }else{
                clearHiddenSections(jq('#'));
                jq('#hospital-admission').hide();
            }
        }

        function onStatusAtReportingChange() {
            if (getValue('status-at-reporting.value') == 160432) {
                jq('#date-of-death').show();
            }else{
                clearHiddenSections(jq('#'));
                jq('#date-of-death').hide();
            }
        }

        function onTravelledRecentlyChange() {
            if (getValue('travelled-last-14-days.value') == 1065) {
                jq('#places-visited').show();
            }else{
                clearHiddenSections(jq('#country'));
                clearHiddenSections(jq('#city'));
                jq('#places-visited').hide();
            }
        }

        function onRecentlyContactedInfectedPersonChange() {
            if (getValue('contact-with-infected-person-last-14-days.value') == 1065) {
                jq('#contact-setting-infected').show();
            }else{
                clearHiddenSections(jq('#obs-contact-setting-infected'));
                jq('#contact-setting-infected').hide();
            }
        }
        function onRecentlyContactedProbableCaseChange() {
            if (getValue('contact-confirmed-probable-case-last-14-days.value') == 1065) {
                jq('#contact-setting-probable').show();
            }else{
                clearHiddenSections(jq('#obs-contact-setting-probable'));
                jq('#contact-setting-probable').hide();
            }
        }
        function onRecentlyVisitedAnimalMarketChange() {

            if (getValue('visited-animal-market-last-14-days.value') == 1065) {
                jq('#animal-market').show();
            }else{
                clearHiddenSections(jq('#animal-market-exposure-location'));
                jq('#animal-market').hide();
            }
        }

        function onOtherSignsChange() {
            if (getValue('obs-other-signs.value') == 5622) {
                jq('#specify-signs').show();
            }else{
                clearHiddenSections(jq('#obs-specify-signs'));
                jq('#specify-signs').hide();
            }
        }

     function onOtherSymptomsChange() {
            if (getValue('obs-other-symptom.value') == 139548) {
                jq('#specify-symptoms').show();
            }else{
                clearHiddenSections(jq('#obs-specify-symptoms'));
                jq('#specify-symptoms').hide();
            }
        }

        //Clear hidden sections
        clearHiddenSections = function(parentObj) {
            parentObj.find('input[type=radio]').each(function() {
                this.checked = false;
            });
            parentObj.find('input[type=checkbox]').each(function() {
                this.checked = false;
            });
            parentObj.find('input[type=text]').each(function() {
                jq(this).val("");
            });
            parentObj.find('select').each(function() {
                this.selectedIndex =0;
            });
        }
    </script>
    <style>
        table {
            border-collapse: collapse;
            border-spacing: 0;
            font: normal 13px Arial, sans-serif;
        }

        table thead th {
            background-color: #DDEFEF;
            color: #336B6B;
            padding: 7px;
            text-align: left;
            text-shadow: 1px 1px 1px #fff;
        }

        table td {
            color: #333;
            padding: 7px;
            text-shadow: 1px 1px 1px #fff;
            word-wrap: break-word;
        }

        fieldset {
            border: 2px solid #d1d0c9;
            margin: 3px 0 3px 0;
            padding: 10px;
            min-width: auto;
            margin-top: 10px;
        }
    </style>
    <!-- hide / show additional fields -->

    <div class="ke-form-header">
           <ifMode mode="EDIT">
                        <script type="text/javascript">
                            jq(function(){
                                onDetectedAtPOEChange();
                                onSymptomaticChange();
                                onPregnantChange();
                                onUnderlyingConditionsChange();
                                onTravelledRecentlyChange();

                            });
                            function onDetectedAtPOEChange() {

                                if (getValue('detected-poe.value') == 165651 || getValue('detected-poe.value') == 163488) {
                                    jq('#date-detected-poe-lbl').show();
                                    jq('#date-detected-poe').show();
                                }else{
                                    clearHiddenSections(jq('#date-detected-poe'));
                                    jq('#date-detected-poe-lbl').hide();
                                    jq('#date-detected-poe').hide();
                                }
                                function onTravelledRecentlyChange() {
                                    if (getValue('travelled-last-14-days.value') == 1065) {
                                        jq('#places-visited').show();
                                    }else{
                                        clearHiddenSections(jq('#country'));
                                        clearHiddenSections(jq('#city'));
                                        jq('#places-visited').hide();
                                    }
                                }

                                function onSymptomaticChange() {

                                    if (getValue('symptomatic.value') == 1065) {
                                        jq('#onset-date').show();
                                        jq('#patient-symptoms').show();
                                    }else{
                                        jq('#onset-date').hide();
                                        jq('#patient-symptoms').hide();
                                        clearHiddenSections(jq('#date-onset-of-symptoms'));
                                        clearHiddenSections(jq('#fever'));
                                        clearHiddenSections(jq('#sore-throat'));
                                        clearHiddenSections(jq('#weakness'));
                                        clearHiddenSections(jq('#cough'));
                                        clearHiddenSections(jq('#diarrhoea'));
                                        clearHiddenSections(jq('#joint-pain'));
                                        clearHiddenSections(jq('#chest-pain'));
                                        clearHiddenSections(jq('#confusion'));
                                        clearHiddenSections(jq('#vomiting'));
                                        clearHiddenSections(jq('#short-breath'));
                                        clearHiddenSections(jq('#runny-nose'));
                                        clearHiddenSections(jq('#headache'));
                                        clearHiddenSections(jq('#abdominal-pain'));
                                        clearHiddenSections(jq('#muscular-pain'));
                                        clearHiddenSections(jq('#obs-other-symptom'));
                                        clearHiddenSections(jq('#obs-specify-symptoms'));
                                    }
                                }
                                function onPregnantChange() {

                                    if (getValue('pregnant.value') == 1065) {
                                        jq('#trimester').show();
                                    }else{
                                        clearHiddenSections(jq('#trimester-number'));
                                        jq('#trimester').hide();
                                    }
                                }function onUnderlyingConditionsChange() {

                                    if (getValue('underlying-conditions.value') == 1065) {
                                        jq('#conditions').show();
                                    }else{
                                        clearHiddenSections(jq('#lung'));
                                        clearHiddenSections(jq('#malignancy'));
                                        clearHiddenSections(jq('#renal'));
                                        clearHiddenSections(jq('#immuno'));
                                        clearHiddenSections(jq('#partum'));
                                        clearHiddenSections(jq('#neuro'));
                                        clearHiddenSections(jq('#liver'));
                                        clearHiddenSections(jq('#diabetes'));
                                        clearHiddenSections(jq('#card'));
                                        jq('#conditions').hide();
                                    }
                                }
                            }
                        </script>
                    </ifMode>
         <table width="70%">
            <tr>
                <td align="left">Date of reporting to National Health authority:
                    <encounterDate id="encounter-date" showTime="true"/>
                </td>
                <td>
                    County: <obs required="true" id="county" conceptId="CIEL:165197"  answers="$countyNames" answerLabels="$countyNames"/>

                </td>
                <td>
                    Sub county: <obs conceptId="161551AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"/>
                </td>
                <td style="display: none">Reporting health facility:
                    <encounterLocation default="GlobalProperty:kenyaemr.defaultLocation"/>
                </td>

            </tr>
        </table>
    </div>
    <div class="ke-form-content">

        <fieldset>
            <legend>Covid 19 Comorbidity</legend>
            <includeIf velocityTest="$patient.gender == 'F'">
            <table id="pregnancy-details">
                <tr>
                    <td>Pregnant</td>
                    <td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
                    <td>
                        <obs conceptId="5272AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " id="pregnant"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="radio" answerLabels="Yes,No"/>
                    </td>
                </tr>
                <tr id= "trimester">
                    <td> Trimester: </td>
                    <td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
                    <td>
                        <obs conceptId="160665" labelText=" " id="trimester-number"
                             answerConceptIds="1721,1722,1723"
                             style="dropdown" answerLabels="First,Second,Third"/>
                    </td>
               </tr>
            </table>
            </includeIf>
            <table>
               <tr>
                    <td>Any underlying conditions</td>
                    <td>
                        <obs conceptId="162747AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " id="underlying-conditions"
                             answerConceptIds="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA,1066AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="radio" answerLabels="Yes,No"/>
                    </td>
                </tr>
            </table>
            <table id="conditions">
                <tr>
                    <td>Cardiovascular disease including hypertension
                    </td>
                    <td>
                        <obs conceptId="119270AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " id="card"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                    <td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
                    <td>Diabetes
                    </td>
                    <td>
                        <obs conceptId="119481AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" " id="diabetes"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                </tr>
                <tr>
                    <td>Liver disease
                    </td>
                    <td>
                        <obs conceptId="6032AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "   id="liver"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                    <td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
                    <td>Chronic neurological or neuromascular disease</td>
                    <td>
                        <obs conceptId="165646AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "   id="neuro"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                </tr>
                <tr>
                    <td>Post-partum less than 6 weeks</td>
                    <td>
                        <obs conceptId="129317AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "         id="partum"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                    <td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
                    <td>Immunodeficiency</td>
                    <td>
                        <obs conceptId="117277AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "          id="immuno"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                </tr>
                <tr></tr>
                <tr>
                    <td>Renal disease</td>
                    <td>
                        <obs conceptId="6033AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "   id="renal"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                    <td>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;</td>
                    <td>Chronic lung disease</td>
                    <td>
                        <obs conceptId="155569AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "     id="lung"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                </tr>
                <tr></tr>
                <tr>
                    <td>Malignancy</td>
                    <td>
                        <obs conceptId="116031AAAAAAAAAAAAAAAAAAAAAAAAAAAAAA" labelText=" "      id="malignancy"
                             answerConceptId="1065AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA"
                             style="checkbox" answerLabel="Yes"/>
                    </td>
                </tr>
            </table>
        </fieldset>


   </div>
    <div class="ke-form-footer">
        <submit/>
    </div>

</htmlform>